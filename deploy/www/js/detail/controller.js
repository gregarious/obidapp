define(["explore/models","detail/views","text!templates/explore-loading.html","text!templates/explore-error.html"],function(e,t,n,r){var i={places:{Model:e.Place,View:t.PlaceDetail},events:{Model:e.Event,View:t.EventDetail},specials:{Model:e.Special,View:t.SpecialDetail}},s,o=Handlebars.compile(r);loadingTemplate=Handlebars.compile(n);var u={activate:function(){s=$("#panel-detail"),s.show()},deactivate:function(){s.hide()},setState:function(e){var t=i[e.resourceType];t||contentEl.html("invalid resource type");var n=new t.Model({id:e.objectId}),r=new t.View({model:n});r.on("back",function(){window.history.back()}),s.html(loadingTemplate()),n.fetch({success:function(e,t){e===n&&s.html(r.render().el)},error:function(e,t){e===n&&s.html(o({message:"Server error!"}))}})}};return _.extend(u,Backbone.Events),u})